<!DOCTYPE html> 
<head> 
	<title> 
		Predicting the fruit or vegetable in an image using a model trained with fastai
	</title> 
	<link rel="stylesheet" href="{{ url_for('static', filename='css/main2.css') }}">
</head> 
<body>
<div class="home"> 
	<h1 style="color: green"> 
		Please select the image you want to classify:
	</h1> 
	<!-- Field for the user to enter the text they want completed -->
	<p> 
	<label for="image_field">Please choose an image:</label>
	<input type="file"
       id="image_field" name="image_field"
       accept="image/png, image/jpeg">
	</p>

	<!-- button to invoke JS functions that assemble selected scoring parameters and link to show-prediction.html -->
	<button>
	<a onclick="link_with_args();" style="font-size : 20px; width: 100%; height: 100px;">Get prediction</a>
	</button>
		
	<script type="text/javascript"> 
		function getOption() { 
			// load selections from HTML controls into JS variables
			// load values of the input file
			var file_value = [];
			const input = document.querySelector('input');
			const curFiles = input.files;
			if(curFiles.length === 0) {
				console.log("file list empty");
 
			} else {
			for(const file of curFiles) {
				file_value.push(file.name);
			}
			}
 			// build complete URL, including scoring parameters, for the result display page
			//
			prefix = "/show-prediction/?"
			window.output = prefix.concat("file_name=",file_value[0])
		} 
	</script> 
	<script>
	function link_with_args(){
	// call getOption to create the URL (including scoring parameters) from HTML control selections
	getOption();	
	console.log("in link_with_args");
	console.log(window.output);
	// specify the target of the link = the URL generated by getOption
	window.location.href = window.output;
	}		
	</script>


</div>
</body> 




</html>					 
